{% extends "base.html.twig" %}


{% block title %}
{{ post.title }}
{% endblock %}

{% block body %}

    <h1>{{ post.title }}</h1>
    {% if post.dateLastUpdate %}
        <p>{{ post.dateLastUpdate }}</p>
    {% else %}
        <p>{{ post.datePublication }}</p>
    {% endif %}
    <img src="/blogphp/{{ picture }}" alt="image de présentation">
    <p>{{ post.heading | raw }}</p>
    <p>{{ post.content | raw }}</p>
    <p>{{ post.author }}</p>
    
    {% if session.pseudo %}
        <form action="/blogphp/nouveau-commentaire" method="post">
            <h2>Laissez un commentaire !</h2>
            <p><label for="content">Commentaire : </label><textarea id="content" name="content" required></textarea></p>
            <input type="hidden" value="{{ post.id }}" name="idPost">
            <input type="submit" value="Envoyer le commentaire" name="newComment">
        </form>
    {% else %}
        <h2>Connectez ou inscrivez-vous pour laisser un commentaire</h2>
        <p><a href="/blogphp/connexion">Se connecter</a></p>
        <p><a href="/blogphp/inscription">S'inscrire</a></p>
    {% endif %}

    <h2>Commentaires publiés</h2>
    {% for comment in comments %}
        <h3>
            {% if comment.avatar %}
                <img src="/blogphp/public/img/avatars/avatar{{ comment.avatar }}.png" alt="avatar">
            {% else %}
                <img src="/blogphp/public/img/avatars/avatar1.png" alt="avatar">
            {% endif %}
            {{ comment.pseudo }}, {{ comment.date }}
        </h3>
        <p>{{ comment.content }}</p>
    {% endfor %}

{% endblock %}